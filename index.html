<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mindful Flower Circle Game</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background: linear-gradient(to right, #ff9a9e, #fad0c4);
        }
        #gameContainer {
            position: relative;
            width: 600px;
            height: 600px;
        }
        .flower {
            position: absolute;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        #startGameButton {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <button id="startGameButton">Start Game</button>
    </div>

    <script>
        const gameContainer = document.getElementById('gameContainer');
        const startGameButton = document.getElementById('startGameButton');
        let flowers = [];
        let innerFlowers = [];
        let gameInProgress = false;

        function createFlowerSVG(size, color) {
            const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            svg.setAttribute("width", size);
            svg.setAttribute("height", size);
            svg.setAttribute("viewBox", "0 0 100 100");

            const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
            circle.setAttribute("cx", "50");
            circle.setAttribute("cy", "50");
            circle.setAttribute("r", "30");
            circle.setAttribute("fill", color);
            svg.appendChild(circle);

            for (let i = 0; i < 6; i++) {
                const petal = document.createElementNS("http://www.w3.org/2000/svg", "path");
                petal.setAttribute("d", "M50 50 Q60 20 50 10 Q40 20 50 50");
                petal.setAttribute("fill", color);
                petal.setAttribute("transform", `rotate(${i * 60}, 50, 50)`);
                svg.appendChild(petal);
            }

            return svg;
        }

        function createFlower(angle, size = 60) {
            const flower = document.createElement('div');
            flower.className = 'flower';
            const radius = 250;
            const x = 300 + radius * Math.cos(angle);
            const y = 300 + radius * Math.sin(angle);
            flower.style.left = `${x - size / 2}px`;
            flower.style.top = `${y - size / 2}px`;
            
            const color = `hsl(${Math.random() * 360}, 70%, 80%)`;
            flower.appendChild(createFlowerSVG(size, color));
            
            flower.addEventListener('click', () => handleFlowerClick(flower));
            
            gameContainer.appendChild(flower);
            return { element: flower, angle, size, clickCount: 0 };
        }

        function handleFlowerClick(flowerElement) {
            const flower = flowers.find(f => f.element === flowerElement);
            if (!flower) return;

            if (flower.clickCount === 0) {
                // First click: Bounce
                flower.element.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    flower.element.style.transform = 'scale(1)';
                }, 300);
                flower.clickCount++;
            } else {
                // Second click: Split and move inside
                splitFlower(flower);
            }
        }

        function splitFlower(flower) {
            const index = flowers.indexOf(flower);
            flowers.splice(index, 1);
            flower.element.remove();

            const newSize = flower.size * 0.7;
            const innerRadius = 150 - innerFlowers.length * 5;
            const angle1 = flower.angle + 0.2;
            const angle2 = flower.angle - 0.2;

            const innerFlower1 = createFlower(angle1, newSize);
            const innerFlower2 = createFlower(angle2, newSize);

            innerFlowers.push(innerFlower1, innerFlower2);

            adjustFlowerPositions();

            if (flowers.length === 0) {
                gameInProgress = false;
            }
        }

        function adjustFlowerPositions() {
            const outerRadius = 250 - innerFlowers.length * 5;
            flowers.forEach((flower, index) => {
                const angle = (index / flowers.length) * 2 * Math.PI;
                const x = 300 + outerRadius * Math.cos(angle);
                const y = 300 + outerRadius * Math.sin(angle);
                flower.element.style.left = `${x - flower.size / 2}px`;
                flower.element.style.top = `${y - flower.size / 2}px`;
                flower.angle = angle;
            });

            innerFlowers.forEach((flower, index) => {
                const innerRadius = 150 - Math.floor(index / 2) * 5;
                const angle = (index / innerFlowers.length) * 2 * Math.PI;
                const x = 300 + innerRadius * Math.cos(angle);
                const y = 300 + innerRadius * Math.sin(angle);
                flower.element.style.left = `${x - flower.size / 2}px`;
                flower.element.style.top = `${y - flower.size / 2}px`;
            });
        }

        function startGame() {
            gameInProgress = true;
            flowers = [];
            innerFlowers = [];
            gameContainer.innerHTML = '';

            const flowerCount = 12;
            for (let i = 0; i < flowerCount; i++) {
                const angle = (i / flowerCount) * 2 * Math.PI;
                flowers.push(createFlower(angle));
            }

            adjustFlowerPositions();
        }

        startGameButton.addEventListener('click', startGame);
    </script>
</body>
</html>
