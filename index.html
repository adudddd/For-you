<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #000;
            font-family: Arial, sans-serif;
            color: #fff;
        }
        #game-area {
            position: relative;
            width: 100vw;
            height: 100vh;
        }
        .amoeba {
            position: absolute;
            border-radius: 50%;
            cursor: pointer;
            transition: transform 0.3s ease, background-color 0.3s ease;
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 70%);
            box-shadow: 0 0 10px rgba(255,255,255,0.5);
        }
        .food {
            position: absolute;
            border-radius: 50%;
            background-color: #00ff00;
            box-shadow: 0 0 5px #00ff00;
        }
        .predator {
            position: absolute;
            width: 30px;
            height: 30px;
            background-color: #ff0000;
            clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
            animation: rotate 2s linear infinite;
        }
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        #reset-button, #score-display, #time-display {
            position: absolute;
            top: 10px;
            padding: 10px 20px;
            background-color: rgba(76, 175, 80, 0.7);
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
        }
        #reset-button {
            right: 10px;
            cursor: pointer;
        }
        #reset-button:hover {
            background-color: rgba(69, 160, 73, 0.9);
        }
        #score-display {
            left: 10px;
        }
        #time-display {
            left: 50%;
            transform: translateX(-50%);
        }
        #game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 48px;
            color: #ff0000;
            display: none;
        }
        .powerup {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: #ff00ff;
            border-radius: 5px;
            animation: pulse 1s infinite alternate;
        }
        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.2); }
        }
    </style>
</head>
<body>
    <div id="game-area"></div>
    <button id="reset-button">Reset Game</button>
    <div id="score-display">Score: 0</div>
    <div id="time-display">Time: 60</div>
    <div id="game-over">GAME OVER</div>
    <audio id="merge-sound" src="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//tQwAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAACAAABhgC1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1//////////////////////////////////////////////////////////////////8AAAAATGF2YzU4LjU0AAAAAAAAAAAAAAAAJAYAAAAAAAAABYYPbGGhAAAA//tAwAAAB4QXj1BQAglxhCG/AAABMm93Z3Jdnf/Rgc6wKAhuF4KAgCAIA+D9YP//10HfWD/8H18H3/ghCAQBAEBg/8EAQB//BAEAQDBoGgaDf//+D74WOlTni1xOhJHRiIqTiZEYib//qpPnCWH9WpFgya1YxC1lpf/6kjZ0vUiotNKnHUymU7f/9avJpGIzkiUoaeo45J5UpS9v//sUj2Ik9Wq/W1p1esSfZUo6kyZIkn////2U6kYjMkydSSoiIzIzM//0RmSI//9ESZNlV6szjgiBER/zERERERERERERE=" preload="auto"></audio>
    <audio id="split-sound" src="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//tQwAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAACAAABhgC1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1//////////////////////////////////////////////////////////////////8AAAAATGF2YzU4LjU0AAAAAAAAAAAAAAAAJAQAAAAAAAAABYZhvWitAAAA//tAwAAAB3QfjXBQAAxoCDHOgAABS4dydhSfQi4uqFD+IWQ0g4UgquCDgx//9cHIOD9YOCg/B+sFAgCAYKBgoEAx///nPqAYLB//BBgEAQDBQIBAfwQBwP//9YIHA4CAIAgCAIAgCAKA4DgIBr///wfAoEAQBAIAgCAQBA//84nWZt1fX+lsEiYCkqPb1YGjcTx8ek0/////jKLwTE4a9YjTE3u8amIXieMRBGI//6Ypj8D4uDp/xE4njYqGolwbGIiP///0xn4XBeEomjUjcVDEwfOgwVC8VDUzGZn///9o+FwRheGIhjeNheLgyMxkZmZyHqTKQv//9MZHQXBKGIWg6Ng6NxgwEoXBcZjMzM//1GdBwFoYheFoNjcOjQUC8WCoYHDMZmZ////3KZ2HImC8NQ9G4ehiLRsJwxFoaj9zM//90yHIcheFoUhOD41GIrGQpFoaj///zZ/Mj0Iw1C0JwfGoxFYyFItDUf///4yPZHsdhWFoUg+Mw5GImFYvEQ5H////yf9IziULQnB8ZhyMRMKxeIhyP///+0j+JZeEIWg6LRQJBCIhGIBCFIaj////vJnlkwcBwEQSBAGwOA0BwFAMAgCAN///5JQcAgCgIAgCAIAgCAMAgCAIA3///lAEAQBAEAQBAEAQBAEAQBAG////KAIAAAA=" preload="auto"></audio>
    <audio id="powerup-sound" src="data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjI5LjEwMAAAAAAAAAAAAAAA//tQwAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAACAAABhgC1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1//////////////////////////////////////////////////////////////////8AAAAATGF2YzU4LjU0AAAAAAAAAAAAAAAAJAQAAAAAAAAABYZhvWitAAAA//tAwAAAB3QfjXBQAAxoCDHOgAABS4dydhSfQi4uqFD+IWQ0g4UgquCDgx//9cHIOD9YOCg/B+sFAgCAYKBgoEAx///nPqAYLB//BBgEAQDBQIBAfwQBwP//9YIHA4CAIAgCAIAgCAKA4DgIBr///wfAoEAQBAIAgCAQBA//84nWZt1fX+lsEiYCkqPb1YGjcTx8ek0/////jKLwTE4a9YjTE3u8amIXieMRBGI//6Ypj8D4uDp/xE4njYqGolwbGIiP///0xn4XBeEomjUjcVDEwfOgwVC8VDUzGZn///9o+FwRheGIhjeNheLgyMxkZmZyHqTKQv//9MZHQXBKGIWg6Ng6NxgwEoXBcZjMzM//1GdBwFoYheFoNjcOjQUC8WCoYHDMZmZ////3KZ2HImC8NQ9G4ehiLRsJwxFoaj9zM//90yHIcheFoUhOD41GIrGQpFoaj///zZ/Mj0Iw1C0JwfGoxFYyFItDUf///4yPZHsdhWFoUg+Mw5GImFYvEQ5H////yf9IziULQnB8ZhyMRMKxeIhyP///+0j+JZeEIWg6LRQJBCIhGIBCFIaj////vJnlkwcBwEQSBAGwOA0BwFAMAgCAN///5JQcAgCgIAgCAIAgCAMAgCAIA3///lAEAQBAEAQBAEAQBAEAQBAG////KAIAAAA=" preload="auto"></audio>
    <script>
        const gameArea = document.getElementById('game-area');
        const resetButton = document.getElementById('reset-button');
        const scoreDisplay = document.getElementById('score-display');
        const timeDisplay = document.getElementById('time-display');
        const gameOverDisplay = document.getElementById('game-over');
        const mergeSound = document.getElementById('merge-sound');
        const splitSound = document.getElementById('split-sound');
        const powerupSound = document.getElementById('powerup-sound');

        let amoebas = [];
        let foods = [];
        let predators = [];
        let powerups = [];
        let gameInterval;
        let score = 0;
        let timeLeft = 60;

        resetButton.addEventListener('click', resetGame);

        function resetGame() {
            clearInterval(gameInterval);
            gameArea.innerHTML = '';
            amoebas = [];
            foods = [];
            predators = [];
            powerups = [];
            score = 0;
            timeLeft = 60;
            scoreDisplay.textContent = 'Score: ' + score;
            timeDisplay.textContent = 'Time: ' + timeLeft;
            gameOverDisplay.style.display = 'none';
            startGame();
        }

        function startGame() {
            createAmoeba();
            gameInterval = setInterval(gameLoop, 1000 / 60);
            setInterval(() => {
                if (timeLeft > 0) {
                    timeLeft--;
                    timeDisplay.textContent = 'Time: ' + timeLeft;
                } else {
                    endGame();
                }
            }, 1000);
        }

        function endGame() {
            clearInterval(gameInterval);
            gameOverDisplay.style.display = 'block';
        }

        function createAmoeba() {
            const amoeba = document.createElement('div');
            amoeba.classList.add('amoeba');
            amoeba.style.width = '50px';
            amoeba.style.height = '50px';
            amoeba.style.left = 'calc(50% - 25px)';
            amoeba.style.top = 'calc(50% - 25px)';
            amoeba.velocityX = Math.random() * 4 - 2;
            amoeba.velocityY = Math.random() * 4 - 2;
            amoeba.stage = 1;
            amoeba.collisions = 0;
            amoeba.addEventListener('click', () => splitAmoeba(amoeba));
            gameArea.appendChild(amoeba);
            amoebas.push(amoeba);
        }

        function splitAmoeba(amoeba) {
            if (parseInt(amoeba.style.width) > 50) {
                const newSize = parseInt(amoeba.style.width) / 2;
                amoeba.style.width = newSize + 'px';
                amoeba.style.height = newSize + 'px';

                const newAmoeba = amoeba.cloneNode();
                newAmoeba.style.width = newSize + 'px';
                newAmoeba.style.height = newSize + 'px';
                newAmoeba.velocityX = Math.random() * 4 - 2;
                newAmoeba.velocityY = Math.random() * 4 - 2;
                newAmoeba.addEventListener('click', () => splitAmoeba(newAmoeba));
                gameArea.appendChild(newAmoeba);
                amoebas.push(newAmoeba);

                splitSound.play();
            }
        }

        function createFood() {
            const food = document.createElement('div');
            food.classList.add('food');
            food.style.width = '10px';
            food.style.height = '10px';
            food.style.left = Math.random() * (gameArea.clientWidth - 10) + 'px';
            food.style.top = Math.random() * (gameArea.clientHeight - 10) + 'px';
            gameArea.appendChild(food);
            foods.push(food);
        }

        function createPredator() {
            const predator = document.createElement('div');
            predator.classList.add('predator');
            predator.style.left = Math.random() * (gameArea.clientWidth - 30) + 'px';
            predator.style.top = Math.random() * (gameArea.clientHeight - 30) + 'px';
            predator.velocityX = Math.random() * 4 - 2;
            predator.velocityY = Math.random() * 4 - 2;
            gameArea.appendChild(predator);
            predators.push(predator);
        }

        function createPowerup() {
            const powerup = document.createElement('div');
            powerup.classList.add('powerup');
            powerup.style.left = Math.random() * (gameArea.clientWidth - 20) + 'px';
            powerup.style.top = Math.random() * (gameArea.clientHeight - 20) + 'px';
            gameArea.appendChild(powerup);
            powerups.push(powerup);
        }

        function gameLoop() {
            amoebas.forEach(updateAmoeba);
            predators.forEach(updatePredator);
            foods.forEach(checkFoodCollision);
            powerups.forEach(checkPowerupCollision);
            checkPredatorCollision();
            if (amoebas.length === 0) {
                endGame();
            }
        }

        function updateAmoeba(amoeba) {
            amoeba.style.left = parseInt(amoeba.style.left) + amoeba.velocityX + 'px';
            amoeba.style.top = parseInt(amoeba.style.top) + amoeba.velocityY + 'px';
            if (parseInt(amoeba.style.left) <= 0 || parseInt(amoeba.style.left) >= gameArea.clientWidth - parseInt(amoeba.style.width)) {
                amoeba.velocityX = -amoeba.velocityX;
            }
            if (parseInt(amoeba.style.top) <= 0 || parseInt(amoeba.style.top) >= gameArea.clientHeight - parseInt(amoeba.style.height)) {
                amoeba.velocityY = -amoeba.velocityY;
            }
        }

        function updatePredator(predator) {
            predator.style.left = parseInt(predator.style.left) + predator.velocityX + 'px';
            predator.style.top = parseInt(predator.style.top) + predator.velocityY + 'px';
            if (parseInt(predator.style.left) <= 0 || parseInt(predator.style.left) >= gameArea.clientWidth - 30) {
                predator.velocityX = -predator.velocityX;
            }
            if (parseInt(predator.style.top) <= 0 || parseInt(predator.style.top) >= gameArea.clientHeight - 30) {
                predator.velocityY = -predator.velocityY;
            }
        }

        function checkFoodCollision(food) {
            amoebas.forEach(amoeba => {
                if (isColliding(amoeba, food)) {
                    gameArea.removeChild(food);
                    foods.splice(foods.indexOf(food), 1);
                    score++;
                    scoreDisplay.textContent = 'Score: ' + score;
                    amoeba.collisions++;
                    evolveAmoeba(amoeba);
                    mergeSound.play();
                }
            });
        }

        function checkPredatorCollision() {
            predators.forEach(predator => {
                amoebas.forEach(amoeba => {
                    if (isColliding(amoeba, predator)) {
                        gameArea.removeChild(amoeba);
                        amoebas.splice(amoebas.indexOf(amoeba), 1);
                        score -= 5;
                        scoreDisplay.textContent = 'Score: ' + score;
                    }
                });
            });
        }

        function checkPowerupCollision(powerup) {
            amoebas.forEach(amoeba => {
                if (isColliding(amoeba, powerup)) {
                    gameArea.removeChild(powerup);
                    powerups.splice(powerups.indexOf(powerup), 1);
                    amoeba.style.width = parseInt(amoeba.style.width) * 1.5 + 'px';
                    amoeba.style.height = parseInt(amoeba.style.height) * 1.5 + 'px';
                    powerupSound.play();
                }
            });
        }

        function evolveAmoeba(amoeba) {
            const newSize = parseInt(amoeba.style.width) + 10;
            amoeba.style.width = newSize + 'px';
            amoeba.style.height = newSize + 'px';
        }

        function isColliding(a, b) {
            const aRect = a.getBoundingClientRect();
            const bRect = b.getBoundingClientRect();
            return !(aRect.top > bRect.bottom || aRect.bottom < bRect.top || aRect.right < bRect.left || aRect.left > bRect.right);
        }

        resetGame();
    </script>
</body>
</html>
